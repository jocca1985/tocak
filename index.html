<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8 />
    <title></title>
    <div id="buttons">
      <label> <input id="query" type="text"/><button id="search-button" onclick="search()">Search</button></label>
      <button id="search-button" onclick="next()">Next page</button>
    </div>
    <!--<link rel="stylesheet" type="text/css" media="screen" href="main.css" />-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <script type="text/javascript">
      var pageToken;
      function makeRequest(q, pageTokenParam) {
        var params = {
          q: q,
          part: 'snippet',
          maxResults: 50
        };
        console.log(pageTokenParam);
        if (pageTokenParam){
          params.pageToken = pageTokenParam;
        }
        var request = gapi.client.youtube.search.list(params);
        console.log(gapi.client.youtube);
        request.execute(function(response) {
          $('#results').empty();
          console.log(response.result);
          var resultItems = response.result.items;
          pageToken = response.result.nextPageToken;
          $.each(resultItems, function(index, item) {
            // vidTitle = item.snippet.title;
            // vidThumburl =  item.snippet.thumbnails.default.url;
            // vidThumbimg = '<pre><img id="thumb" src="'+vidThumburl+'" alt="No  Image Available." style="width:204px;height:128px"></pre>';
            // $('#results').append('<pre>' + vidTitle + vidThumbimg +  '</pre>');
            if (item.id.videoId){
              vidUrl = 'https://www.youtube.com/watch?v='+item.id.videoId; 
              $('#results').append(vidUrl+'<br />'); 
            }
            
          });
        });
      }

      // function makeChannelRequest(q, pageTokenParam) {
      //   var params = {
      //     id: q,
      //     part: 'snippet',
      //     maxResults: 50
      //   };
      //   console.log(pageTokenParam);
      //   if (pageTokenParam){
      //     params.pageToken = pageTokenParam;
      //   }
      //   var request = gapi.client.youtube.channels.list(params);
    
      //   request.execute(function(response) {
      //     $('#results').empty();
      //     console.log(response.result);
      //     var resultItems = response.result.items;
      //     pageToken = response.result.nextPageToken;
      //     $.each(resultItems, function(index, item) {
      //       // vidTitle = item.snippet.title;
      //       // vidThumburl =  item.snippet.thumbnails.default.url;
      //       // vidThumbimg = '<pre><img id="thumb" src="'+vidThumburl+'" alt="No  Image Available." style="width:204px;height:128px"></pre>';
      //       // $('#results').append('<pre>' + vidTitle + vidThumbimg +  '</pre>');
      //       if (item.id.videoId){
      //         vidUrl = 'https://www.youtube.com/watch?v='+item.id.videoId; 
      //         $('#results').append(vidUrl+'<br />'); 
      //       }
            
      //     });
      //   });
      // }

      function init() {
        gapi.client.setApiKey('AIzaSyDEL_B3gYUF33EkeSqkr8hPVMJ0L9mZGhw');
      }
      function next() {
        gapi.client.load('youtube', 'v3', function() {
          // data = jQuery.parseJSON( '{ "data": [{"name":'+$('#query').val()+'}] }' );
          var q = $('#query').val();
          var data = {data:[{name: q}]};

          $.each(data["data"], function(index, value) {
            makeRequest(value["name"], pageToken);
          });
        });
      }
      function search() {
        gapi.client.load('youtube', 'v3', function() {
          // data = jQuery.parseJSON( '{ "data": [{"name":'+$('#query').val()+'}] }' );
          var q = $('#query').val();
          var data = {data:[{name: q}]};

          $.each(data["data"], function(index, value) {
            makeRequest(value["name"]);
          });
        });
      }
      function searchChannel() {
        gapi.client.load('youtube', 'v3', function() {
          // data = jQuery.parseJSON( '{ "data": [{"name":'+$('#query').val()+'}] }' );
          var q = $('#query').val();
          var data = {data:[{name: q}]};

          $.each(data["data"], function(index, value) {
            makeChannelRequest(value["name"]);
          });
        });
      }

    </script>

    <script type="text/javascript" src="https://apis.google.com/js/client.js?onload=init"></script>

  </head>

  <body>

    <h1>Youtube URL getter</h1>
    <ul id="results"></ul>

  </body>

</html>